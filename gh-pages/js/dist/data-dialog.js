var Attv,__extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)};return function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();!function(a){var n,t=(n=a.Attribute,__extends(o,n),o.prototype.show=function(t){return this.getValue(t).show(t)},o.UniqueId="DataDialog",o);function o(t){var e=n.call(this,o.UniqueId,t,!0)||this;return e.isStrict=!0,e.dependency.uses.push(a.DataContent.UniqueId,a.DataUrl.UniqueId,a.DataModal.UniqueId,a.DataTitle.UniqueId,a.DataOptions.UniqueId,a.DataPartial.UniqueId),e.dependency.internals.push(a.DataCallback.UniqueId),e}a.DataDialog=t}(Attv=Attv||{}),function(t){var e,a,n;function o(){var t=null!==a&&a.apply(this,arguments)||this;return t.style="\ndialog.attv-dialog {\n    border: 1px solid gray;\n    min-width: 250px;\n}\ndialog.attv-dialog h3.attv-dialog-header-title {\n    margin-top: 8px;\n}\ndialog.attv-dialog .attv-dialog-body {\n    margin-bottom: 8px;\n}\n",t.templateHtml='\n<dialog class="attv-dialog">\n    <div class="attv-dialog-header">\n        <div class="attv-dialog-header-content">\n            <h3 class="attv-dialog-header-title"></h3>\n        </div>\n    </div>\n    <div class="attv-dialog-body">\n        <div class="attv-dialog-body-content"></div>\n    </div>\n    <div class="attv-dialog-footer">\n        <div class="attv-dialog-footer-content"></div>\n    </div>\n</dialog>',t.titleSelector="h3.attv-dialog-header-title",t.contentSelector=".attv-dialog-body-content",t}e=t.DataDialog||(t.DataDialog={}),a=t.Attribute.Settings,__extends(o,a),n=o,e.DefaultSettings=n}(Attv=Attv||{}),function(r){!function(t){var o,e=(o=r.Attribute.Value,__extends(a,o),a.prototype.loadElement=function(e){var a=this;return e.attr("onclick")&&this.resolver.addAttribute(r.DataCallback.UniqueId,e,e.attr("onclick")),e.onclick=function(t){return a.show(e)},!0},a.prototype.show=function(t){var e,a,n;return t instanceof HTMLElement?(e=t,(n=this.resolver.resolve(r.DataOptions.UniqueId).getOptions(e)).isModal=n.isModal||this.resolver.resolve(r.DataModal.UniqueId).isModal(e),n.title=n.title||this.resolver.resolve(r.DataTitle.UniqueId).getTitle(e),n.content=n.content||this.resolver.resolve(r.DataContent.UniqueId).getContent(e),n.content||(a=this.resolver.resolve(r.DataPartial.UniqueId)).exists(e)&&(n.callback=function(t){a.getValue(e).render(e,void 0,{targetElement:t})})):n=t,this.applySettings(n),this.doShow(n)},a.prototype.doShow=function(t){var e=r.createHTMLElement(t.templateHtml).querySelector("dialog");return document.body.append(e),t.title&&e.querySelector(t.titleSelector).html(t.title),t.content&&e.querySelector(t.contentSelector).html(t.content),t.isModal?e.showModal():e.show(),t.callback&&t.callback(e.querySelector(t.contentSelector)),e},a.prototype.applySettings=function(t){var e,a;this.settings&&(a=this.settings,t.templateHtml=a.templateHtml,t.style=a.style,t.titleSelector=a.titleSelector,t.contentSelector=a.contentSelector),null!==(e=this.settings)&&void 0!==e&&e.commit()},a);function a(t,e,a,n){return void 0===n&&(n=[new r.Validators.RequiredAnyElementsValidator(["a","button"])]),o.call(this,t,e,a,n)||this}t.DefaultValue=e;var n,i=(n=r.DataPartial.DefaultValue,__extends(l,n),l.prototype.doRender=function(t,e,a){var n=this.resolver.resolve(r.DataTemplateSource.UniqueId).renderTemplate(t,e),o=this.resolver.resolve(r.DataTarget.UniqueId).getTargetElement(t)||(null===a||void 0===a?void 0:a.targetElement);o.html(n),r.loadElements(o)},l);function l(t){return n.call(this,"dialog",t)||this}t.DataPartialDialogValue=i}(r.DataDialog||(r.DataDialog={}))}(Attv=Attv||{}),function(t){var e,a=(e=t.Attribute,__extends(n,e),n.prototype.isModal=function(t){return"true"===this.getValue(t).getRaw(t)},n.UniqueId="DataModal",n);function n(t){return e.call(this,n.UniqueId,t,!1)||this}t.DataModal=a}(Attv=Attv||{}),Attv.loader.pre.push(function(){Attv.registerAttribute("data-dialog",function(t){return new Attv.DataDialog(t)},function(t,e){e.push(new Attv.DataDialog.DefaultValue(Attv.configuration.defaultTag,t,function(t,e){return new Attv.DataDialog.DefaultSettings(t,e)})),e.push(new Attv.DataDialog.DefaultValue("click",t,function(t,e){return new Attv.DataDialog.DefaultSettings("default",e)}))}),Attv.registerAttribute("data-modal",function(t){return new Attv.DataModal(t)}),Attv.registerAttributeValue(Attv.DataPartial.UniqueId,function(t,e){e.push(new Attv.DataDialog.DataPartialDialogValue(t))})});