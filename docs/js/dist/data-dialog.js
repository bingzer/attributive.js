var Attv,__extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)};return function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();!function(a){var n,t=(n=a.Attribute,__extends(o,n),o.prototype.show=function(t){return this.getValue(t).show(t)},o.UniqueId="DataDialog",o);function o(t){var e=n.call(this,o.UniqueId,t,!0)||this;return e.isStrict=!0,e.dependency.uses.push(a.DataContent.UniqueId,a.DataUrl.UniqueId,a.DataModal.UniqueId,a.DataTitle.UniqueId,a.DataPartial.UniqueId),e.dependency.internals.push(a.DataCallback.UniqueId),e}a.DataDialog=t}(Attv=Attv||{}),function(r){!function(o){var n,t=(n=r.Attribute.Value,__extends(e,n),e.prototype.loadElement=function(e){var a=this;return e.attvAttr("onclick")&&this.resolver.addAttribute(r.DataCallback.UniqueId,e,e.attvAttr("onclick")),e.onclick=function(t){return a.show(e),!1},!0},e.prototype.show=function(t){var a,n=this;t instanceof HTMLElement?(a=t,this.loadSettings(a,function(t){var e;t.isModal=t.isModal||n.resolver.resolve(r.DataModal.UniqueId).isModal(a),t.title=t.title||n.resolver.resolve(r.DataTitle.UniqueId).getTitle(a),t.content=t.content||n.resolver.resolve(r.DataContent.UniqueId).getContent(a),t.content||(e=n.resolver.resolve(r.DataPartial.UniqueId)).exists(a)&&(t.callback=function(t){e.getValue(a).render(a,void 0,{targetElement:t})}),t.titleSelector=t.titleSelector||o.DialogSettings.DefaultTitleSelector,t.contentSelector=t.contentSelector||o.DialogSettings.DefaultContentSelector,t.templateHtml=t.templateHtml||o.DialogSettings.DefaultTemplateHtml,t.style=o.DialogSettings.getStyle(t),n.showDialog(t)})):this.showDialog(t)},e.prototype.showDialog=function(t){var e=r.createHTMLElement(t.templateHtml).querySelector("dialog");return document.body.append(e),t.title&&e.querySelector(t.titleSelector).attvHtml(t.title),t.content&&e.querySelector(t.contentSelector).attvHtml(t.content),t.isModal?e.showModal():e.attvShow(),t.callback&&t.callback(e.querySelector(t.contentSelector)),e},e);function e(t,e,a){return void 0===a&&(a=[new r.Validators.RequiredElement(["a","button"])]),n.call(this,t,e,a)||this}o.DefaultValue=t;var a,l=(a=r.DataPartial.DefaultValue,__extends(i,a),i.prototype.doRender=function(t,e,a){var n=this.resolver.resolve(r.DataTemplateSource.UniqueId).renderTemplate(t,e),o=this.resolver.resolve(r.DataTarget.UniqueId).getTargetElement(t)||(null===a||void 0===a?void 0:a.targetElement);o.attvHtml(n),r.loadElements(o)},i);function i(t){return a.call(this,"dialog",t)||this}o.DataPartialDialogValue=l}(r.DataDialog||(r.DataDialog={}))}(Attv=Attv||{}),function(t){var e,a;e=t.DataDialog||(t.DataDialog={}),(a=e.DialogSettings||(e.DialogSettings={})).DefaultTitleSelector="h3.attv-dialog-header-title",a.DefaultContentSelector=".attv-dialog-body-content",a.DefaultTemplateHtml='\n<dialog class="attv-dialog">\n    <div class="attv-dialog-header">\n        <div class="attv-dialog-header-content">\n            <h3 class="attv-dialog-header-title"></h3>\n        </div>\n    </div>\n    <div class="attv-dialog-body">\n        <div class="attv-dialog-body-content"></div>\n    </div>\n    <div class="attv-dialog-footer">\n        <div class="attv-dialog-footer-content"></div>\n    </div>\n</dialog>',a.getStyle=function(t){return"\ndialog.attv-dialog {\n    border: 1px solid gray;\n    min-width: 250px;\n}\ndialog.attv-dialog h3.attv-dialog-header-title {\n    margin-top: 8px;\n}\ndialog.attv-dialog .attv-dialog-body {\n    margin-bottom: 8px;\n}\n"}}(Attv=Attv||{}),function(t){var e,a=(e=t.Attribute,__extends(n,e),n.prototype.isModal=function(t){return"true"===this.getValue(t).getRaw(t)},n.UniqueId="DataModal",n);function n(t){return e.call(this,n.UniqueId,t,!1)||this}t.DataModal=a}(Attv=Attv||{}),Attv.loader.pre.push(function(){Attv.registerAttribute("data-dialog",function(t){return new Attv.DataDialog(t)},function(t,e){e.push(new Attv.DataDialog.DefaultValue(Attv.configuration.defaultTag,t)),e.push(new Attv.DataDialog.DefaultValue("click",t))}),Attv.registerAttribute("data-modal",function(t){return new Attv.DataModal(t)}),Attv.registerAttributeValue(Attv.DataPartial.UniqueId,function(t,e){e.push(new Attv.DataDialog.DataPartialDialogValue(t))})});